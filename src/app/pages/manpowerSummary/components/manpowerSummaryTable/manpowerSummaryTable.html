<p-panel>
  <p-header>
    <div class="row">
      <div class="col">
        <h4>Manpower Summary</h4>
      </div>
      <div class="col">
        <!-- <button type="button" class="btn btn-primary btn-xs" (click)="dt.exportCSV()" style="float:right; margin-right:6px;">
          <i ng-reflect-class-name="fa fa-file-text-o" class="fa fa-file-text-o"></i> Export</button> -->
      </div>
    </div>
    <div class="row">
      <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12" style="text-align: left">
        Date Start
        <br/>
        <p-calendar id="startDatePicker" hourFormat="24" showTime="showTime" showIcon="true" [(ngModel)]="startDate" dateFormat="yy-mm-dd"
          appendTo="body"></p-calendar>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12" style="text-align: left">
        Date End
        <br/>
        <p-calendar id="endDatePicker" hourFormat="24" showTime="showTime" showIcon="true" [(ngModel)]="endDate" dateFormat="yy-mm-dd"
          appendTo="body"></p-calendar>
      </div>
      <div class="col" style="text-align: left">
        Section
        <br/>
        <div class="ui-inputgroup">
          <p-autoComplete [(ngModel)]="section" field="display" [suggestions]="filteredSections" (completeMethod)="filterSections($event)"
            [size]="30" [dropdown]="true" [minLength]="1" placeholder="Search" (onSelect)="onSectionSelect($event)" appendTo="body">
          </p-autoComplete>
          <a routerLink="/pages/section/form" target="blank">
            <button pButton type="button" icon="fa-plus-circle"></button>
          </a>
        </div>
      </div>
      <div class="col" style="text-align: left">
        <br/>
        <button type="button" class="btn btn-primary btn-xs" (click)="search()">
          <i ng-reflect-class-name="fa fa-search" class="fa fa-search"></i> Search
        </button>
      </div>
      <div class="col-md-2 col-xl-1" style="text-align: right">
        Total Count
        <br/> &nbsp;&nbsp;
        <b>{{total}}</b>
      </div>
    </div>
  </p-header>
  <!-- <manpower-summary-chart [data]="rows"></manpower-summary-chart> -->
  <!-- <p-dataTable #dt [value]="rows" [responsive]="true" selectionMode="single" sortMode="multiple" resizableColumns="true" exportFilename="manpowerSummarys">
    <p-header>

    </p-header>
    <p-column field="controlPoint.workCenter.costCenter.section.code" header="Section Code" [sortable]="true"></p-column>
    <p-column field="controlPoint.workCenter.costCenter.section.name" header="Section" [sortable]="true"></p-column>
    <p-column field="controlPoint.code" header="Control Point Code"></p-column>
    <p-column field="controlPoint.name" header="Control Point"></p-column>
    <p-column field="count" header="Employee Count"></p-column>
  </p-dataTable> -->
  <br/>

  <div class="row">

    <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3" *ngFor="let row of rows">
      <p-panel>
        <p-header>

          <div class="row">
            <div class="col-4" style="text-align: left">
              {{row.controlPoint.code}}
            </div>
            <div class="col-8" style="text-align: right">
              {{row.count}} / {{total}} &nbsp;&nbsp;&nbsp; {{(Math.round((row.count / total)*10000)/100)}}% &nbsp;&nbsp;
              <i ng-reflect-class-name="fa fa-info-circle" class="fa fa-info-circle text-success" style="cursor: pointer;" (click)="showInfo(row,op,$event)"></i>
            </div>
          </div>
        </p-header>

        <div class="row">

          <div class="col-sm-6">
            {{row.controlPoint.code}}
            <br/> {{row.controlPoint.name}}
            <br/>
            <br/> {{row.controlPoint.workCenter.costCenter.section.code}}
            <br/> {{row.controlPoint.workCenter.costCenter.section.name}}
            <br/>
          </div>

          <div class="col-sm-6">
            <p-chart type="doughnut" [data]="row.chartData" [options]="chartOptions"></p-chart>
          </div>

        </div>
      </p-panel>
    </div>

  </div>
</p-panel>
<p-overlayPanel  #op [dismissable]="true" [showCloseIcon]="true">
    <!-- <p-panel *ngIf="selectedRow!==undefined"> -->
        <!-- <p-header>

          <div class="row">
            <div class="col-4" style="text-align: left">
              {{selectedRow.controlPoint.code}}
            </div>
            <div class="col-8" style="text-align: right">
              {{selectedRow.count}} / {{total}} &nbsp;&nbsp;&nbsp; {{(Math.round((selectedRow.count / total)*10000)/100)}}% &nbsp;&nbsp;
            </div>
          </div>
        </p-header>


            {{selectedRow.controlPoint.code}} {{selectedRow.controlPoint.name}}
            <br/>
            <br/> {{selectedRow.controlPoint.workCenter.costCenter.section.code}} {{selectedRow.controlPoint.workCenter.costCenter.section.name}}
            <br/> -->

 <p-dataTable *ngIf="selectedRow!==undefined" [value]="selectedRow.employeeList" [responsive]="true" selectionMode="single" sortMode="multiple" resizableColumns="true">
    <p-column field="code" header="Code" [sortable]="true"></p-column>
    <p-column field="callingName" header="Name" [sortable]="true"></p-column>
  </p-dataTable>

      <!-- </p-panel> -->
</p-overlayPanel>
